# 消息类型 Message

go-cqhttp-js 参照 mirai-js，能过 Message 类，将 go-cqhttp 的 CQ code 数据抽象并封装成消息链 message_chain 。

## 使用

```js
import { Message } from 'go-cqhttp-js'

bot.sendMessage({
    group: 12345,
    message: new Message().addAt(54321).addText('hi')
})
```

每一个以 `add` 开头的方法都将返回实例本身，可以链式追加。

?> `Message` 实例内部维护一个消息链 `message_chain` 和一个 `cq_code` 字符串，每次调用 `add` 方法都将 `push` 一个 `CQType` 实例到消息链 `message_chain`，并在 `cq_code` 字符串中进行追加。

## 数据结构

```js
{
    type: string        // CQ code 的 type 类型名称，
    data: {             // CQ code 的 数据存储区域
        //...
    }
}
```

例：

```js
{
    type: 'face'        // 表情
    data: {
        id: 123,        // 表情ID 123
        name: '不'      // 表情名称 不
    }
}
```

## 成员方法

### addText

`文本消息`

#### 参数

- `text: string` 必选

    要发送的文本消息内容

***

### addFace

`QQ 表情`

#### 参数

- `opts: object`

```js
{
    id?: number         // 二选一，表情 ID
    name?: string       // 二选一，表情名称
}
```

#### 表情 ID / 名称 表

| 名称  | id    | 名称  | id    | 名称  | id    | 名称  | id    | 名称  | id    |
| :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- | :----- |
| 惊讶  | 0     | 撇嘴  | 1     | 色    | 2     | 发呆  | 3     | 得意  | 4     |
|流泪|5|害羞|6|闭嘴|7|睡|8|大哭|9|
|尴尬|10|发怒|11|调皮|12|呲牙|13|微笑|14|
|难过|15|酷|16|抓狂|18|吐|19|偷笑|20|
|可爱|21|白眼|22|傲慢|23|饥饿|24|困|25|
|惊恐|26|流汗|27|憨笑|28|悠闲|29|奋斗|30|
|咒骂|31|疑问|32|嘘|33|晕|34|折磨|35|
|衰|36|骷髅|37|敲打|38|再见|39|发抖|41|
|爱情|42|跳跳|43|猪头|46|拥抱|49|蛋糕|53|
|闪电|54|炸弹|55|刀|56|足球|57|便便|59|
|咖啡|60|饭|61|玫瑰|63|凋谢|64|爱心|66|
|心碎|67|礼物|69|太阳|74|月亮|75|赞|76|
|踩|77|握手|78|胜利|79|飞吻|85|怄火|86|
|西瓜|89|冷汗|96|擦汗|97|抠鼻|98|鼓掌|99|
|糗大了|100|坏笑|101|左哼哼|102|右哼哼|103|哈欠|104|
|鄙视|105|委屈|106|快哭了|107|阴险|108|左亲亲|109|
|吓|110|可怜|111|菜刀|112|啤酒|113|篮球|114|
|乒乓|115|示爱|116|瓢虫|117|抱拳|118|勾引|119|
|拳头|120|差劲|121|爱你|122|不|123|好|124|
|转圈|125|磕头|126|回头|127|跳绳|128|挥手|129|
|激动|130|街舞|131|献吻|132|左太极|133|右太极|134|
|双喜|136|鞭炮|137|灯笼|138|K歌|140|喝彩|144|
|祈祷|145|爆筋|146|棒棒糖|147|喝奶|148|飞机|151|
|钞票|158|药|168|手枪|169|茶|171|眨眼睛|172|
|泪奔|173|无奈|174|卖萌|175|小纠结|176|喷血|177|
|斜眼笑|178|doge|179|惊喜|180|骚扰|181|笑哭|182|
|我最美|183|河蟹|184|羊驼|185|幽灵|187|蛋|188|
|菊花|190|红包|192|大笑|193|不开心|194|冷漠|197|
|呃|198|好棒|199|拜托|200|点赞|201|无聊|202|
|托脸|203|吃|204|送花|205|害怕|206|花痴|207|
|小样儿|208|飙泪|210|我不看|211|托腮|212|啵啵|214|
|糊脸|215|拍头|216|扯一扯|217|舔一舔|218|蹭一蹭|219|
|拽炸天|220|顶呱呱|221|抱抱|222|暴击|223|开枪|224|
|撩一撩|225|拍桌|226|拍手|227|恭喜|228|干杯|229|
|嘲讽|230|哼|231|佛系|232|掐一掐|233|惊呆|234|
|颤抖|235|啃头|236|偷看|237|扇脸|238|原谅|239|
|喷脸|240|生日快乐|241|头撞击|242|甩头|243|扔狗|244|
|加油必胜|245|加油抱抱|246|口罩护体|247|搬砖中|260|忙到飞起|261|
|脑阔疼|262|沧桑|263|捂脸|264|辣眼睛|265|哦哟|266|
|头秃|267|问号脸|268|暗中观察|269|emm|270|吃瓜|271|
|呵呵哒|272|我酸了|273|太南了|274|辣椒酱|276|汪汪|277|
|汗|278|打脸|279|击掌|280|无眼笑|281|敬礼|282|
|狂笑|283|面无表情|284|摸鱼|285|魔鬼笑|286|哦|287|
|请|288|睁眼|289|敲开心|290|震惊|291|让我康康|292|
|摸锦鲤|293|期待|294|拿到红包|295|真好|296|拜谢|297|
|元宝|298|牛啊|299|胖三斤|300|好闪|301|左拜年|302|
|右拜年|303|红包包|304|右亲亲|305|牛气冲天|306|喵喵|307|
|求红包|308|谢红包|309|新年烟花|310|打call|311|变形|312|
|嗑到了|313|仔细分析|314|加油|315|我没事|316|菜狗|317|
|崇拜|318|比心|319|庆祝|320|老色痞|321|拒绝|322|
|嫌弃|323|吃糖|324|

***

### addRecord

`语音`

#### 参数

- `opts: object`

```js
{
    file: string            // 语音文件名
    magic?: 0 | 1           // 可选，默认 0, 1 表示变声
    url?: string            // 可选，语音 url
    cache?: 0 | 1           // 可选，0 | 1, 表示是否使用已缓存的文件，默认 1
    proxy?: 0 | 1           // 可选，表示是否使用代理下载文件，默认 1
    timeout?: number        // 可选，表示下载网络文件时超时时间
}
```

***

### addVideo

`短视频`

#### 参数

- `opts: object`

```js
{
    file: string            // 视频地址
    cover?: string          // 视频封面
    c?: 2 | 3               // 通过网络下载视频时的线程数
}
```

***

### addAt

`@某人`

#### 参数

- `qq: number | 'all'` 必选，要 @ 的 QQ， 'all' 代表 全体成员

***

### addShare

`链接分享`

#### 参数

- `opts: object`

```js
{
    url: string             // url
    title: string           // 标题
    content?: string        // 可选，内容描述
    image?: string          // 可选，图片 url
}
```

***

### addMusic

`音乐分享`

#### 参数

- `opts: object`

```js
{
    type: 'qq' | '163' | 'xm' | 'custom'    // 使用 QQ 音乐，网易云音乐，虾米音乐，自定义音乐
    id?: number                             // 可选，非 custom 自定义时必填，歌曲 ID
    url?: string                            // 可选，自定义目标 url
    audio?: string                          // 可选，自定义音乐 url
    title?: string                          // 可选，自定义音乐标题
    content?: string                        // 可选，自定义内容描述
    image?: string                          // 可选，图片 url
}
```

***

### addImage

`图片`

#### 参数

- `opts: object`

```js
{
    file: string                // 图片文件名
    type: 'flash' | 'show'      // 图片类型，flash 闪照，show 秀图，默认 普通图片
    subType?: string            // 可选，图片子类型，只出现在群聊中
    url?: string                // 可选，图片 url
    cache?: 0 | 1               // 可选，是否使用已缓存的图片，只在通过网络 url 发送时有效，默认 1
    id?: number                 // 可选，发送秀图时的特效 ID，默认 40000
    c?: 2 | 3                   // 可选，通过网络下载时的线程数
}
```

#### 秀图特效

| id    | 类型  | id    | 类型  | id    | 类型  | id    | 类型  | id    | 类型  | id    | 类型  |
| :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  |
| 40000 | 普通  | 40001 | 幻影  | 40002 | 抖动  | 40003 | 生日  | 40004 | 爱你  | 40005 | 征友  |

***

### addReply

`回复`

#### 参数

- `opts: object`

```js
{
    id?: number             // 可选，所要引用的消息 message_id，必须为本群消息，没有 ID 则作为自定义回复消息
    text?: string           // 可选，自定义回复的信息
    qq?: number             // 可选，自定义消息必选，回复时的自定义 QQ
    time?: number           // 可选，自定义的消息时间戳
    seq?: number            // 可选，起始消息序号，可通过 bot.getMessage 获得
}
```

***

### addPoke

`戳一戳`

#### 参数

- `qq: number` 需要戳的群成员

***

### addGift

`礼物`

#### 参数

- `opts: object`

```js
{
    qq: number              // 接收礼物的群成员 QQ
    id?: number             // 礼物 ID，与 name 二选一
    name?: string           // 礼物名称，与 ID 二选一
}
```

#### 可赠送的礼物

| id    | 类型  | id    | 类型  | id    | 类型  | id    | 类型  | id    | 类型  |
| :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  | :---  |
| 0     | 甜 Wink   | 1     | 快乐肥宅水    | 2     | 幸运手链  | 3     | 卡布奇诺      | 4     | 猫咪手表      |
| 5     | 绒绒手套  | 6     | 彩虹糖果      | 7     | 坚强      | 8     | 告白话筒      | 9     | 牵你的手      |
| 10    | 可爱猫咪  | 11    | 神秘面具      | 12    | 我超忙的  | 13    | 爱心口罩      |

***

### parse

`将接收到的 CQ code 字符串解构为 message_chain 消息链`

#### 参数

- `message: string` 需要解构的 CQ code 字符串，存储于实例消息链 `message_chain` 中。

***
